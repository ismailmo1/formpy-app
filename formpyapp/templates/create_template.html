{% extends "layout.html" %}
{% set active_link = 'create' %}

{% block content %}
<div class="row">
  <h1 class="mt-5">Create a Template!</h1>
</div>
<div class="mt-5">
  <nav id="tab">
    <div class="nav nav-tabs" role="tablist">
      <button id="uploadNavButton" class="nav-link active" role="tab" type="button" data-bs-toggle="tab"
        data-bs-target="#nav-upload">
        Upload
      </button>
      <button id="alignNavButton" class="nav-link" role="tab" type="button" data-bs-toggle="tab"
        data-bs-target="#nav-align">
        Align
      </button>
      <button id="defineNavButton" class="nav-link" role="tab" type="button" data-bs-toggle="tab"
        data-bs-target="#nav-define">
        Define
      </button>
      <button id="saveNavButton" class="nav-link" role="tab" type="button" data-bs-toggle="tab"
        data-bs-target="#nav-save">
        Save
      </button>
    </div>
  </nav>
</div>

<div class="tab-content" id="nav-tabContent">
  <div class="tab-pane fade show active" id="nav-upload" role="tabpanel" aria-labelledby="nav-upload-tab">
    <div class="row" id="formRow">
      <form method="POST" enctype="multipart/form-data" id="uploadImgForm">
        <label class="row m-2" for="photoUpload">Upload an image of your filled template</label>
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
        <input type="file" name="uploadedImg" id="photoUpload" />
        <div>
          <input class="btn btn-success mt-1" type="submit" value="Upload" />
        </div>
      </form>
    </div>
  </div>
  <div class="tab-pane fade" id="nav-align" role="tabpanel" aria-labelledby="nav-align-tab">
    <div class="row"">
      canvas for alignment goes here
    </div>
  </div>
  <div class=" tab-pane fade" id="nav-define" role="tabpanel" aria-labelledby="nav-home-tab">
      <div class="accordion accordion-flush" id="accordionFlushExample">

        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
              All Questions
            </button>
          </h2>
          <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne"
            data-bs-parent="#accordionFlushExample">
            <div class="accordion-body">
              <div class="row" id="templateFormRow">
                <form action="/newform">
                  <div class="mb-3">
                    {{form.name.label(class ='form-label')}}
                    {{form.name(class='form-control')}}
                  </div>
                  <div class="mb-3">
                    {{form.public.label(class ='form-label')}}
                    {{form.public(class='form-control')}}
                  </div>
                  {% for question in form.questions %}
                  {{form.questions.label(class ='form-label')}}
                  {{form.questions(class='form-control')}}
                  {% endfor %}

                  <div class="mb-3">
                    {{form.category_tags.label(class ='form-label')}}
                    {{form.category_tags(class='form-control')}}
                  </div>

                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane fade" id="nav-auto" role="tabpanel" aria-labelledby="nav-profile-tab">

      </div>
    </div>
    <div class="tab-pane fade" id="nav-save" role="tabpanel" aria-labelledby="nav-align-tab">
      <div class="row"">
          nav save
      </div>
    </div>
  </div>
  <script>const csrf_token = " {{ csrf_token() }}"</script>
        <script src={{ url_for("static",filename="/scripts/fabric.min.js" ) }}></script>
        <script src={{ url_for("static",filename="/scripts/canvasScript.js" ) }}></script>
        <script src={{ url_for("static",filename="/scripts/templateCreation.js" ) }}></script>

        {% endblock %}